<!-- Generated by SpecStory -->

# Debugging MCP Server Connection Error (2025-05-18 11:44:21)

_**User**_

I have this error when trying to connect the mcp server to cursor:

2025-05-18 11:43:39.479 [error] Demo: Error connecting to SSE server after fallback: Error POSTing to endpoint (HTTP 404): 404 page not found

here is the command in mcp.json from cursor:

    "Clinia Doc Demo": {
      "url": "http://localhost:8080/api/sse"
    }

---

_**Assistant**_

Your configuration and code look almost correct, but the error message:

```
Error POSTing to endpoint (HTTP 404): 404 page not found
```

suggests that the endpoint `/api/sse` is not handling POST requests, or the server is not set up to accept POSTs at that route.

### Analysis

- In your `mcp.go`, you have:
  ```go
  mux.Handle("/api/sse", server.NewSSEServer(s, server.WithSSEEndpoint("/api/sse")))
  ```
  This registers `/api/sse` with the handler returned by `server.NewSSEServer`.

- The error is a 404, which means the route exists but does not accept the method (POST), or the handler is not set up to handle POST requests.

- Many SSE (Server-Sent Events) endpoints are GET-only, but Cursor's MCP integration expects to POST to the endpoint.

### What to check and try

1. **Check the Handler Implementation**  
   The handler returned by `server.NewSSEServer` must support POST requests. If it only supports GET, you'll get a 404 on POST.

2. **Check the MCP-Go Documentation**  
   The [mark3labs/mcp-go](https://github.com/mark3labs/mcp-go) library's `server.NewSSEServer` should support POST for tool calls. If not, you may need to update the handler or use a different endpoint.

3. **Test the Endpoint Manually**  
   Try a simple POST to `http://localhost:8080/api/sse` using curl or Postman to see if you get a 404 or a different error.

   ```sh
   curl -X POST http://localhost:8080/api/sse
   ```

4. **Check for Path Issues**  
   Make sure there are no typos in the path, and that the server is running on the expected port.

### Next Steps

- **Check the implementation of `server.NewSSEServer` in the `mcp-go` library** to confirm it supports POST.
- If it does not, you may need to update your code to use the correct handler for POST requests, or update the library if it's out of date.

Would you like me to look up the implementation of `server.NewSSEServer` in the `mcp-go` library to confirm its behavior? This will help determine if the issue is with the handler or with the configuration.

---

